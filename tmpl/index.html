<!doctype HTML>
<html lang="en">
<head>
    <title>Spyfall</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Spyfall">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://spyfall.xyz">
    <meta property="og:description"
          content="Find the spy before time runs out!">
    <meta property="og:image" content="/img/icon.png">
    <link rel="apple-touch-icon" sizes="180x180"
          href="/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32"
          href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"
          href="/img/favicon-16x16.png">
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let src = new EventSource('/events')
            console.log(
                src.withCredentials,
                src.readyState,
                src.url,
            )
            src.addEventListener('open', () => {
                console.log("Connection to server opened.")
            })

            src.addEventListener('message', (e) => {
                console.log(`message: ${e.data}`)
            })

            src.addEventListener('error', () => {
                console.log("EventSource failed.")
            })

            let button = document.querySelector('button')
            button.onclick = function () {
                src.close()
                console.log('Connection closed')
            }
        })
    </script>
</head>
<body>
<h1>Welcome to Spyfall!</h1>
<p> Your name is {{ .Name }}</p>
<p> Your role is {{ .Role }}</p>
<button>Close the connection</button>
</body>
</html>
